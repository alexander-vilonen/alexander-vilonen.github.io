(()=>{var e={258:e=>{!function(t){e.exports=t;var n={on:function(e,t){return o(this,e).push(t),this},once:function(e,t){var n=this;return r.originalListener=t,o(n,e).push(r),n;function r(){i.call(n,e,r),t.apply(this,arguments)}},off:i,emit:function(e,t){var n=this,r=o(n,e,!0);if(!r)return!1;var i=arguments.length;if(1===i)r.forEach(u);else if(2===i)r.forEach(c);else{var a=Array.prototype.slice.call(arguments,1);r.forEach(s)}return!!r.length;function u(e){e.call(n)}function c(e){e.call(n,t)}function s(e){e.apply(n,a)}}};function r(e){for(var t in n)e[t]=n[t];return e}function i(e,t){var n,r=this;if(arguments.length){if(t){if(n=o(r,e,!0)){if(!(n=n.filter(a)).length)return i.call(r,e);r.listeners[e]=n}}else if((n=r.listeners)&&(delete n[e],!Object.keys(n).length))return i.call(r)}else delete r.listeners;return r;function a(e){return e!==t&&e.originalListener!==t}}function o(e,t,n){if(!n||e.listeners){var r=e.listeners||(e.listeners={});return r[t]||(r[t]=[])}}r(t.prototype),t.mixin=r}((function e(){if(!(this instanceof e))return new e}))}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(258),t=n.n(e);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))}var t,n;return t=e,(n=[{key:"sdk",get:function(){return null}},{key:"language",get:function(){var e=navigator.language;return"string"==typeof e?e.substring(0,2):"en"}},{key:"payload",get:function(){return new URL(window.location.href).searchParams.get("payload")}},{key:"isInviteFriendsSupported",get:function(){return!1}},{key:"isCommunitySupported",get:function(){return!1}},{key:"isShareSupported",get:function(){return!1}},{key:"inviteFriends",value:function(){return Promise.reject()}},{key:"joinCommunity",value:function(){return Promise.reject()}},{key:"share",value:function(){return Promise.reject()}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){l(e,t),t.add(e)}function s(e,t,n){l(e,t),t.set(e,n)}function l(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function f(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function p(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,y(e,t,"set"),n),n}function h(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,y(e,t,"get"))}function y(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var v="created",w="completed",d=new WeakMap,b=new WeakMap,m=new WeakMap,g=new WeakMap,k=new WeakSet,O=new WeakSet,j=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,O),c(this,k),s(this,d,{writable:!0,value:0}),s(this,b,{writable:!0,value:0}),s(this,m,{writable:!0,value:v}),s(this,g,{writable:!0,value:0}),p(this,d,t)}var t,n;return t=e,(n=[{key:"state",get:function(){return h(this,m)}},{key:"start",value:function(){var e=this;switch(h(this,m)){case v:case w:p(this,b,h(this,d)),f(this,k,P).call(this,"started"),p(this,g,setInterval((function(){p(e,b,h(e,b)-1),e.emit("time_left_changed",h(e,b)),h(e,b)<=0&&(f(e,O,S).call(e),f(e,k,P).call(e,w))}),1e3))}}},{key:"stop",value:function(){f(this,O,S).call(this),f(this,k,P).call(this,"stopped")}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e){p(this,m,e),this.emit("state_changed",h(this,m))}function S(){p(this,b,0),clearInterval(h(this,g))}t().mixin(j.prototype);const E=j;function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t,n){T(e,t),t.set(e,n)}function T(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function M(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function R(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,D(e,t,"set"),n),n}function C(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,D(e,t,"get"))}function D(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var I="interstitial_state_changed",x="rewarded_state_changed",A="opened",z="closed",G="failed",B="opened",N="closed",F="failed",J="rewarded",V=new WeakMap,K=new WeakMap,L=new WeakMap,U=new WeakSet,Y=function(){function e(t){var n,r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),T(this,n=U),n.add(this),W(this,V,{writable:!0,value:void 0}),W(this,K,{writable:!0,value:void 0}),W(this,L,{writable:!0,value:60}),R(this,V,t),C(this,V).on(I,(function(e){return r.emit(I,e)})),C(this,V).on(x,(function(e){return r.emit(x,e)}))}var t,n;return t=e,(n=[{key:"interstitialState",get:function(){return C(this,V).interstitialState}},{key:"rewardedState",get:function(){return C(this,V).rewardedState}},{key:"setMinimumDelayBetweenInterstitial",value:function(e){R(this,L,e),C(this,K)&&(C(this,K).stop(),M(this,U,q).call(this))}},{key:"showInterstitial",value:function(e){var t=e&&e.ignoreDelay;return C(this,K)&&C(this,K).state!==w&&!t?Promise.reject("The minimum delay between interstitials has not passed"):(C(this,L)>0&&M(this,U,q).call(this),C(this,V).showInterstitial())}},{key:"showRewarded",value:function(){return C(this,V).showRewarded()}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function q(){R(this,K,new E(C(this,L))),C(this,K).start()}t().mixin(Y.prototype);const H=Y;function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t){return $=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$(e,t)}function ee(e,t){if(t&&("object"===Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return te(e)}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e){return ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ne(e)}function re(e,t){oe(e,t),t.add(e)}function ie(e,t,n){oe(e,t),t.set(e,n)}function oe(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ae(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,se(e,t,"set"),n),n}function ue(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function ce(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,se(e,t,"get"))}function se(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var le="game_data",fe=new WeakMap,pe=new WeakMap,he=new WeakMap,ye=new WeakSet,ve=new WeakSet,we=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(a,e);var t,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ne(r);if(i){var n=ne(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ee(this,e)});function a(){var e;X(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return re(te(e=o.call.apply(o,[this].concat(n))),ve),re(te(e),ye),ie(te(e),fe,{writable:!0,value:void 0}),ie(te(e),pe,{writable:!0,value:void 0}),ie(te(e),he,{writable:!0,value:void 0}),e}return t=a,(n=[{key:"id",get:function(){return"mock"}},{key:"interstitialState",get:function(){return ce(this,fe)}},{key:"rewardedState",get:function(){return ce(this,pe)}},{key:"initialize",value:function(){return Promise.resolve()}},{key:"showInterstitial",value:function(){var e=this;return new Promise((function(t){t(),ue(e,ye,de).call(e,A),ue(e,ye,de).call(e,z)}))}},{key:"showRewarded",value:function(){var e=this;return new Promise((function(t){t(),ue(e,ve,be).call(e,B),ue(e,ve,be).call(e,J),ue(e,ve,be).call(e,N)}))}},{key:"getGameData",value:function(e){var t=this;return new Promise((function(n){if(ce(t,he))void 0===ce(t,he)[e]?n(null):n(ce(t,he)[e]);else{try{var r=localStorage.getItem(le);r&&ae(t,he,JSON.parse(r))}catch(e){}ce(t,he)&&void 0!==ce(t,he)[e]?n(ce(t,he)[e]):n(null)}}))}},{key:"setGameData",value:function(e,t){var n=this;return ce(this,he)||ae(this,he,{}),ce(this,he)[e]=t,new Promise((function(e){try{localStorage.setItem(le,JSON.stringify(ce(n,he)))}catch(e){}e()}))}}])&&Z(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(a);function de(e){ae(this,fe,e),this.emit(I,ce(this,fe))}function be(e){ae(this,pe,e),this.emit(x,ce(this,pe))}t().mixin(we.prototype);const me=we;function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ke(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function Oe(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Pe(e,t,"set"),n),n}function je(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Pe(e,t,"get"))}function Pe(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Se=new WeakMap,Ee=new WeakMap,_e=new WeakMap;const We=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ke(this,Se,{writable:!0,value:void 0}),ke(this,Ee,{writable:!0,value:void 0}),ke(this,_e,{writable:!0,value:void 0}),Oe(this,Se,new Promise((function(e,n){Oe(t,Ee,e),Oe(t,_e,n)})))}var t,n;return t=e,(n=[{key:"promise",get:function(){return je(this,Se)}},{key:"resolve",value:function(){je(this,Ee).call(this)}},{key:"reject",value:function(){je(this,_e).call(this)}}])&&ge(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var Te=function(e){return new Promise((function(t){var n=document.createElement("script");n.src=e,n.addEventListener("load",t),document.head.appendChild(n)}))};function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function De(){return De="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Ie(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},De.apply(this,arguments)}function Ie(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ge(e)););return e}function xe(e,t){return xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xe(e,t)}function Ae(e,t){if(t&&("object"===Me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ze(e)}function ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ge(e)}function Be(e,t){Fe(e,t),t.add(e)}function Ne(e,t,n){Fe(e,t),t.set(e,n)}function Fe(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Je(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function Ve(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Le(e,t,"set"),n),n}function Ke(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Le(e,t,"get"))}function Le(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ue=new WeakMap,Ye=new WeakMap,qe=new WeakMap,He=new WeakMap,Qe=new WeakMap,Xe=new WeakMap,Ze=new WeakMap,$e=new WeakSet,et=new WeakSet,tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xe(e,t)}(a,e);var t,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ge(r);if(i){var n=Ge(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ae(this,e)});function a(){var e;Re(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Be(ze(e=o.call.apply(o,[this].concat(n))),et),Be(ze(e),$e),Ne(ze(e),Ue,{writable:!0,value:void 0}),Ne(ze(e),Ye,{writable:!0,value:void 0}),Ne(ze(e),qe,{writable:!0,value:void 0}),Ne(ze(e),He,{writable:!0,value:void 0}),Ne(ze(e),Qe,{writable:!0,value:void 0}),Ne(ze(e),Xe,{writable:!0,value:void 0}),Ne(ze(e),Ze,{writable:!0,value:void 0}),e}return t=a,(n=[{key:"id",get:function(){return"vk"}},{key:"sdk",get:function(){return Ke(this,Ue)}},{key:"language",get:function(){var e=new URL(window.location.href);if(e.searchParams.has("language"))switch(e.searchParams.get("language")){case 0:return"ru";case 1:return"uk";case 2:return"be";case 3:return"en"}return De(Ge(a.prototype),"language",this)}},{key:"payload",get:function(){var e=new URL(window.location.href);return e.searchParams.has("hash")?e.searchParams.get("hash"):De(Ge(a.prototype),"payload",this)}},{key:"interstitialState",get:function(){return Ke(this,He)}},{key:"rewardedState",get:function(){return Ke(this,Qe)}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isCommunitySupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;return Ke(this,Ye)?Promise.resolve():(Ke(this,qe)||(Ve(this,qe,new We),Te("https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js").then((function(){Ve(e,Ue,window.vkBridge),Ke(e,Ue).send("VKWebAppInit").then((function(){Ve(e,Ye,!0),Ke(e,qe)&&(Ke(e,qe).resolve(),Ve(e,qe,null))}))}))),Ke(this,qe).promise)}},{key:"showInterstitial",value:function(){var e=this;return Ke(this,Xe)||(Ve(this,Xe,new We),Ke(this,Ue).send("VKWebAppShowNativeAds",{ad_format:"preloader"}).then((function(t){t.result?(Ke(e,Xe)&&(Ke(e,Xe).resolve(),Ve(e,Xe,null)),Je(e,$e,nt).call(e,A),Je(e,$e,nt).call(e,z)):(Ke(e,Xe)&&(Ke(e,Xe).reject(),Ve(e,Xe,null)),Je(e,$e,nt).call(e,G))})).catch((function(t){Ke(e,Xe)&&(Ke(e,Xe).reject(t),Ve(e,Xe,null)),Je(e,$e,nt).call(e,G)}))),Ke(this,Xe).promise}},{key:"showRewarded",value:function(){var e=this;return Ke(this,Ze)||(Ve(this,Ze,new We),Ke(this,Ue).send("VKWebAppShowNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(t){t.result?(Ke(e,Ze)&&(Ke(e,Ze).resolve(),Ve(e,Ze,null)),Je(e,et,rt).call(e,B),Je(e,et,rt).call(e,J),Je(e,et,rt).call(e,N)):(Ke(e,Ze)&&(Ke(e,Ze).reject(),Ve(e,Ze,null)),Je(e,et,rt).call(e,F))})).catch((function(t){Ke(e,Ze)&&(Ke(e,Ze).reject(t),Ve(e,Ze,null)),Je(e,et,rt).call(e,F)}))),Ke(this,Ze).promise}},{key:"getGameData",value:function(e){var t=this;return new Promise((function(n){Ke(t,Ue).send("VKWebAppStorageGet",{keys:[e]}).then((function(e){if(""!==e.keys[0].value){var t;try{t=JSON.parse(e.keys[0].value)}catch(n){t=e.keys[0].value}n(t)}else n(null)})).catch((function(){n(null)}))}))}},{key:"setGameData",value:function(e,t){var n=this;return new Promise((function(r){var i={key:e,value:t};"string"!=typeof t&&(i.value=JSON.stringify(t)),Ke(n,Ue).send("VKWebAppStorageSet",i).then((function(){r()}))}))}},{key:"inviteFriends",value:function(){var e=this;return new Promise((function(t,n){Ke(e,Ue).send("VKWebAppShowInviteBox").then((function(e){e.success?t():n()})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?n(e.error_data.error_reason):n()}))}))}},{key:"joinCommunity",value:function(){var e=this;return this.options&&this.options.groupId?new Promise((function(t,n){Ke(e,Ue).send("VKWebAppJoinGroup",{group_id:e.options.groupId}).then((function(r){if(r&&r.result)return t(),void window.open("https://vk.com/public"+e.options.groupId);n()})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?n(e.error_data.error_reason):n()}))})):Promise.reject()}},{key:"share",value:function(){var e=this;return new Promise((function(t,n){Ke(e,Ue).send("VKWebAppShare").then((function(e){e&&e.type?t():n()})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?n(e.error_data.error_reason):n()}))}))}}])&&Ce(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(a);function nt(e){Ke(this,He)!==e&&(Ve(this,He,e),this.emit(I,Ke(this,He)))}function rt(e){Ke(this,Qe)!==e&&(Ve(this,Qe,e),this.emit(x,Ke(this,Qe)))}t().mixin(tt.prototype);const it=tt;function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function at(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ct(){return ct="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=st(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ct.apply(this,arguments)}function st(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ht(e)););return e}function lt(e,t){return lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},lt(e,t)}function ft(e,t){if(t&&("object"===ot(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pt(e)}function pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ht(e){return ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ht(e)}function yt(e,t){wt(e,t),t.add(e)}function vt(e,t,n){wt(e,t),t.set(e,n)}function wt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function dt(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function bt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,gt(e,t,"set"),n),n}function mt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,gt(e,t,"get"))}function gt(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var kt="game_data",Ot=new WeakMap,jt=new WeakMap,Pt=new WeakMap,St=new WeakMap,Et=new WeakMap,_t=new WeakMap,Wt=new WeakMap,Tt=new WeakMap,Mt=new WeakMap,Rt=new WeakMap,Ct=new WeakSet,Dt=new WeakSet,It=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lt(e,t)}(a,e);var t,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ht(r);if(i){var n=ht(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ft(this,e)});function a(){var e;at(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yt(pt(e=o.call.apply(o,[this].concat(n))),Dt),yt(pt(e),Ct),vt(pt(e),Ot,{writable:!0,value:void 0}),vt(pt(e),jt,{writable:!0,value:void 0}),vt(pt(e),Pt,{writable:!0,value:void 0}),vt(pt(e),St,{writable:!0,value:void 0}),vt(pt(e),Et,{writable:!0,value:void 0}),vt(pt(e),_t,{writable:!0,value:void 0}),vt(pt(e),Wt,{writable:!0,value:void 0}),vt(pt(e),Tt,{writable:!0,value:void 0}),vt(pt(e),Mt,{writable:!0,value:void 0}),vt(pt(e),Rt,{writable:!0,value:void 0}),e}return t=a,(n=[{key:"id",get:function(){return"yandex"}},{key:"sdk",get:function(){return mt(this,Ot)}},{key:"language",get:function(){return mt(this,Ot)?mt(this,Ot).environment.i18n.lang:ct(ht(a.prototype),"language",this)}},{key:"interstitialState",get:function(){return mt(this,St)}},{key:"rewardedState",get:function(){return mt(this,Et)}},{key:"initialize",value:function(){var e=this;return mt(this,jt)?Promise.resolve():(mt(this,Pt)||(bt(this,Pt,new We),Te("https://yandex.ru/games/sdk/v2").then((function(){window.YaGames.init().then((function(t){bt(e,Ot,t),mt(e,Ot).getPlayer({scopes:!1}).then((function(t){bt(e,Tt,t),bt(e,jt,!0),mt(e,Pt)&&(mt(e,Pt).resolve(),bt(e,Pt,null))})).catch((function(t){mt(e,Ot).getStorage().then((function(t){bt(e,Mt,t),bt(e,jt,!0),mt(e,Pt)&&(mt(e,Pt).resolve(),bt(e,Pt,null))}))}))}))}))),mt(this,Pt).promise)}},{key:"showInterstitial",value:function(){var e=this;return mt(this,St)===A?Promise.reject():(mt(this,_t)||(bt(this,_t,new We),mt(this,Ot).adv.showFullscreenAdv({callbacks:{onOpen:function(){mt(e,_t)&&(mt(e,_t).resolve(),bt(e,_t,null)),dt(e,Ct,xt).call(e,A)},onClose:function(t){t?dt(e,Ct,xt).call(e,z):(mt(e,_t)&&(mt(e,_t).reject(),bt(e,_t,null)),dt(e,Ct,xt).call(e,G))}}})),mt(this,_t).promise)}},{key:"showRewarded",value:function(){var e=this;return mt(this,Et)===B||mt(this,Et)===J?Promise.reject():(mt(this,Wt)||(bt(this,Wt,new We),mt(this,Ot).adv.showRewardedVideo({callbacks:{onOpen:function(){mt(e,Wt)&&(mt(e,Wt).resolve(),bt(e,Wt,null)),dt(e,Dt,At).call(e,B)},onRewarded:function(){dt(e,Dt,At).call(e,J)},onClose:function(){dt(e,Dt,At).call(e,N)},onError:function(t){mt(e,Wt)&&(mt(e,Wt).reject(t),bt(e,Wt,null)),dt(e,Dt,At).call(e,F)}}})),mt(this,Wt).promise)}},{key:"getGameData",value:function(e){var t=this;return new Promise((function(n){if(mt(t,Rt))void 0===mt(t,Rt)[e]?n(null):n(mt(t,Rt)[e]);else if(mt(t,Tt))mt(t,Tt).getData().then((function(r){bt(t,Rt,r),void 0===mt(t,Rt)[e]?n(null):n(mt(t,Rt)[e])})).catch((function(){n(null)}));else{if(mt(t,Mt)){var r=mt(t,Mt).getItem(kt);r&&bt(t,Rt,JSON.parse(r))}else try{var i=localStorage.getItem(kt);i&&bt(t,Rt,JSON.parse(i))}catch(e){}void 0===mt(t,Rt)[e]?n(null):n(mt(t,Rt)[e])}}))}},{key:"setGameData",value:function(e,t){var n=this;return mt(this,Rt)||bt(this,Rt,{}),mt(this,Rt)[e]=t,new Promise((function(e){if(mt(n,Tt))mt(n,Tt).setData(mt(n,Rt)).then((function(){e()}));else if(mt(n,Mt))mt(n,Mt).setItem(kt,JSON.stringify(mt(n,Rt))),e();else{try{localStorage.setItem(kt,JSON.stringify(mt(n,Rt)))}catch(e){}e()}}))}}])&&ut(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(a);function xt(e){mt(this,St)!==e&&(bt(this,St,e),this.emit(I,mt(this,St)))}function At(e){mt(this,Et)!==e&&(bt(this,Et,e),this.emit(x,mt(this,Et)))}t().mixin(It.prototype);const zt=It;function Gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Nt(e,t,"get"))}function Nt(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ft=new WeakMap;const Jt=function(){function e(t){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i={writable:!0,value:void 0},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(n=this,r=Ft),r.set(n,i),function(e,t,n){(function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}})(e,Nt(e,t,"set"),n)}(this,Ft,t)}var t,n;return t=e,(n=[{key:"getData",value:function(e){return Bt(this,Ft).getGameData(e)}},{key:"setData",value:function(e,t){return Bt(this,Ft).setGameData(e,t)}}])&&Gt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Lt(e,t,"get"))}function Lt(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ut=new WeakMap;const Yt=function(){function e(t){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i={writable:!0,value:void 0},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(n=this,r=Ut),r.set(n,i),function(e,t,n){(function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}})(e,Lt(e,t,"set"),n)}(this,Ut,t)}var t,n;return t=e,(n=[{key:"isInviteFriendsSupported",get:function(){return Kt(this,Ut).isInviteFriendsSupported}},{key:"isCommunitySupported",get:function(){return Kt(this,Ut).isCommunitySupported}},{key:"isShareSupported",get:function(){return Kt(this,Ut).isShareSupported}},{key:"inviteFriends",value:function(){return Kt(this,Ut).inviteFriends()}},{key:"joinCommunity",value:function(){return Kt(this,Ut).joinCommunity()}},{key:"share",value:function(){return Kt(this,Ut).share()}}])&&Vt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xt(e,t,n){Zt(e,t),t.set(e,n)}function Zt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $t(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,tn(e,t,"set"),n),n}function en(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,tn(e,t,"get"))}function tn(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var nn=new WeakMap,rn=new WeakMap,on=new WeakMap,an=new WeakMap,un=new WeakMap,cn=new WeakSet;function sn(){var e=new URL(window.location.href),t=["g","a","m","e","s",".","s","3",".","y","a","n","d","e","x",".","n","e","t"].join("");e.hostname.includes(t)?$t(this,rn,new zt):e.searchParams.has("api_id")&&e.searchParams.has("viewer_id")&&e.searchParams.has("auth_key")?$t(this,rn,new it(this.options&&this.options.platforms&&this.options.platforms.vk)):$t(this,rn,new me)}const ln=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Zt(this,t=cn),t.add(this),Xt(this,nn,{writable:!0,value:!1}),Xt(this,rn,{writable:!0,value:void 0}),Xt(this,on,{writable:!0,value:void 0}),Xt(this,an,{writable:!0,value:void 0}),Xt(this,un,{writable:!0,value:void 0})}var t,n;return t=e,n=[{key:"version",get:function(){return"1.2.1"}},{key:"isInitialized",get:function(){return en(this,nn)}},{key:"platform",get:function(){return en(this,rn)}},{key:"advertisement",get:function(){return en(this,on)}},{key:"game",get:function(){return en(this,an)}},{key:"social",get:function(){return en(this,un)}},{key:"initialize",value:function(e){var t=this;return en(this,nn)?Promise.resolve():(this.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){Ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),new Promise((function(e){(function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n})(t,cn,sn).call(t),en(t,rn).initialize().then((function(){$t(t,on,new H(en(t,rn))),$t(t,an,new Jt(en(t,rn))),$t(t,un,new Yt(en(t,rn))),$t(t,nn,!0),console.log("%c InstantGamesBridge v."+t.version+" initialized. ","background: #01A5DA; color: white"),e()}))})))}}],n&&Qt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();window.instantGamesBridge=new ln})()})();